var e={d:(a,t)=>{for(var s in t)e.o(t,s)&&!e.o(a,s)&&Object.defineProperty(a,s,{enumerable:!0,get:t[s]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)},a={};e.d(a,{W:()=>t});class t{constructor(e){this.currentUser=null,this.currentProject=null,this.currentHub=null,this.demoMode=!1,this.useDirectFetch=!1,this.useStreaming=!0,this.serveraddress=e}getCurrentUser(){return this.currentUser}getCurrentHub(){return this.currentHub}getCurrentProject(){return this.currentProject}getUseDirectFetch(){return this.useDirectFetch}getUseStreaming(){return this.useStreaming}getDemoMode(){return this.demoMode}getUploadURL(){return this.serveraddress+"/caas_um_api/upload"}getUploadArrayURL(){return this.serveraddress+"/caas_um_api/uploadArray"}async getConfiguration(){let e=await fetch(this.serveraddress+"/caas_um_api/configuration"),a=await e.json();this.useDirectFetch=a.useDirectFetch,this.useStreaming=a.useStreaming,this.demoMode=a.demoMode}async checkLogin(){let e=await fetch(this.serveraddress+"/caas_um_api/checklogin"),a=await e.json();return!!a.succeeded&&(this.currentUser=a.user,a.hub?a.project?(this.currentHub=a.hub,this.currentProject=a.project):(this.currentHub=a.hub,this.currentProject=null):(this.currentProject=null,this.currentHub=null),!0)}async logout(){await fetch(this.serveraddress+"/caas_um_api/logout/",{method:"PUT"})}register(e){let a=new FormData;a.append("firstName",e.firstName),a.append("lastName",e.lastName),a.append("email",e.email),a.append("password",e.password);let t=this;return new Promise((function(e,s){$.ajax({url:t.serveraddress+"/caas_um_api/register",type:"post",data:a,contentType:!1,processData:!1,success:function(a){a.ERROR?e(a.ERROR):e("SUCCESS")}})}))}async login(e,a){let t=await fetch(this.serveraddress+"/caas_um_api/login/"+e+"/"+a,{method:"PUT"});return t=await t.json(),t.ERROR||(this.currentUser=t.user),t}async leaveHub(){await fetch(this.serveraddress+"/caas_um_api/hub/none",{method:"PUT"}),this.currentProject=null,this.currentHub=null}async getHubs(){let e=await fetch(this.serveraddress+"/caas_um_api/hubs");return await e.json()}async renameHub(e,a){await fetch(this.serveraddress+"/caas_um_api/renameHub/"+e+"/"+a,{method:"PUT"})}async createHub(e){let a=await fetch(this.serveraddress+"/caas_um_api/newhub/"+e,{method:"PUT"});return await a.json()}async loadHub(e){let a=await fetch(this.serveraddress+"/caas_um_api/hub/"+e,{method:"PUT"}),t=await a.json();this.currentHub=t}async getHubUsers(e){let a=await fetch(this.serveraddress+"/caas_um_api/hubusers/"+e);return await a.json()}async addHubUser(e,a,t){await fetch(this.serveraddress+"/caas_um_api/addHubUser/"+e+"/"+a+"/"+t,{method:"PUT"})}async updateHubUser(e,a,t){await fetch(this.serveraddress+"/caas_um_api/updateHubUser/"+e+"/"+a+"/"+t,{method:"PUT"})}async deleteHubUser(e,a){await fetch(this.serveraddress+"/caas_um_api/deleteHubUser/"+e+"/"+a,{method:"PUT"})}async deleteHub(e){await fetch(this.serveraddress+"/caas_um_api/deleteHub/"+e,{method:"PUT"})}async acceptHub(e,a){await fetch(this.serveraddress+"/caas_um_api/acceptHub/"+e+"/"+a,{method:"PUT"}),this.refreshHubTable()}async leaveProject(){await fetch(this.serveraddress+"/caas_um_api/project/none/none",{method:"PUT"}),this.currentProject=null}async renameProject(e,a){await fetch(this.serveraddress+"/caas_um_api/renameproject/"+e+"/"+a,{method:"PUT"})}async createProject(e,a){let t=await fetch(this.serveraddress+"/caas_um_api/newproject/"+e+"/"+a,{method:"PUT"});return await t.json()}async deleteProject(e){await fetch(this.serveraddress+"/caas_um_api/deleteproject/"+e,{method:"PUT"})}async loadProject(e){let a=await fetch(this.serveraddress+"/caas_um_api/project/"+e,{method:"PUT"}),t=await a.json();this.currentProject=t}async getProjects(e){let a=await fetch(this.serveraddress+"/caas_um_api/projects/"+e);return await a.json()}async getProjectUsers(e){let a=await fetch(this.serveraddress+"/caas_um_api/projectusers/"+e);return await a.json()}async addProjectUser(e,a,t){await fetch(this.serveraddress+"/caas_um_api/addProjectUser/"+e+"/"+a+"/"+t,{method:"PUT"})}async updateProjectUser(e,a,t){await fetch(this.serveraddress+"/caas_um_api/updateProjectUser/"+e+"/"+a+"/"+t,{method:"PUT"})}async deleteProjectUser(e,a){await fetch(this.serveraddress+"/caas_um_api/deleteProjectUser/"+e+"/"+a,{method:"PUT"})}async getUploadToken(e,a){let t=await fetch(this.serveraddress+"/caas_um_api/uploadToken/"+e+"/"+a);return await t.json()}processUploadFromToken(e,a){fetch(this.serveraddress+"/caas_um_api/processToken/"+e,{method:"PUT",headers:{startpath:a}})}async getModels(){let e=await fetch(this.serveraddress+"/caas_um_api/models");return await e.json()}async getDownloadToken(e,a){let t=await fetch(this.serveraddress+"/caas_um_api/downloadToken/"+e+"/"+a);return await t.json()}async getPNG(e){return await fetch(this.serveraddress+"/caas_um_api/png/"+e)}async getSCS(e){let a=await fetch(this.serveraddress+"/caas_um_api/scs/"+e),t=await a.arrayBuffer();return new Uint8Array(t)}async enableStreamAccess(e){await fetch(this.serveraddress+"/caas_um_api/enableStreamAccess/"+e,{method:"PUT"})}async deleteModel(e){await fetch(this.serveraddress+"/caas_um_api/deleteModel/"+e,{method:"PUT"})}async initializeWebviewer(e){let a;if(this.useStreaming){let t=await fetch(this.serveraddress+"/caas_um_api/streamingSession"),s=await t.json();a=new Communicator.WebViewer({containerId:e,endpointUri:"ws://"+s.serverurl+":"+s.port+"?token="+s.sessionid,model:"_empty",rendererType:Communicator.RendererType.Client})}else a=new Communicator.WebViewer({containerId:e,empty:!0,streamingMode:1});return a}}var s=a.W;export{s as CaasUserManagementClient};